reset --soft (рабочая директория и индекс остаются как были, отмена только в ре)
reset --mixed (обнуляет индекс и репозитория, рабочая директория остается))
reset --hard (обнуляет все до указанного комита)


//Например, мы сделали изменения и проиндексировали, но поняли, что комит делать рано и решили откатиться

git add index.html
git reset HEAD

После этого индекс будет очищен

При этом можно указывать путь при mixed reset (это режим по умолчанию)

git reset HEAD index.html

//То есть git add - это добавить, а git reset - удаляет.
//Чтобы переклбчиться на другой коммит, то лучше использовать 
git checkout 54ad index.html



//Есть два вида удаления, первый - это когда мы удалемя изменения в индекстированных файлах. второе - когда удаляем изменения в неиндектисрованных файлах

git checkout -f reset_clean.txt

или

git reset --hard

//А вот удаляем неотслеживаемые файлы и директории

git clean -dxf


//удаляем коммиты и возвращаем предудыщее состояние в рабочую директорию
//при этом в индексе тоже все обнуляется


git reset --hard 2fad
git reset --hard @~ (@-HEAD, ~ один коммит назад))

//Чтобы вернуть назад удаленный по ошибке коммит

git reset --hard 4569 (удаленный комит на котором мастер была ранее)
git reflog master


cat .git/ORIG_HEAD
git reset --hard ORIG_HEAD


//Чтобы отменить коммит и вернуться в индекс до коммита. ТО есть reset hard послежний HEAD комит и им перезарписывает все. А если нам нужно просто отменить коммит, то есть вернуться в индекс, и попросить этот коммит:
То есть мягкий коммит не трогает рабочую директорию и индекс


git reset --soft @~

а отменить это

git reset --soft ORIG_HEAD


//Но мы ведь сделали отмену коммита для того, чтобы внести изменения. Мы их вносим и добавляем в индекс

git add reset_clean.txt

git commit -C ORIG_HEAD

-C значит что у нового комита будет то же имя и то же время, что и у предыдущего комита, который мы отменили.
Чтобы в новом исправленном комите было имя комитера и дата

git commit -C ORIG_HEAD --reset-author


git show --quiet ORIG_HEAD (предыдущий коммит)
git show --quiet (коммит который мы только что сделали)

git show --quiet --pretty=fuller (покажет дату коммита и коммитера, которая будет фактической исправленного коммита)


//еще раз. Чтобы отменить несколько коммитов, и сделать новый коммит вместо этихдвух или трех

git reset --soft @~2
git commit -m "new commit"


//А теперь git ammend. Это вместо soft reset в одной команде.
Сначала мы исправляем ошибки в рабочей директории, а потом делаем аменд



git add index.html
git commit --amend


amend отменяет последний коммит и заменяет его индексом.
Также это можно использовать с флагом

git commit --amend --reset-author


